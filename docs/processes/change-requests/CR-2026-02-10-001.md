# Change Request: CR-2026-02-10-001

**Status**: APPROVED

**Created**: 2026-02-10 09:52:00 UTC  
**Last Updated**: 2026-02-10 09:52:00 UTC

---

## Basic Information

**Title**: Build Rapid7 InsightOps Log Ingestion Service with Parquet Storage

**Requestor**: Product Team

**Category**: FEATURE

**Priority**: P2 - MEDIUM (Minor feature, moderate bug)

**Urgency**: NORMAL (Within 2 weeks)

---

## Description

### Problem Statement

Organizations using Rapid7 InsightOps need to analyze their logs using advanced analytics tools. Currently, there's no automated way to extract logs from the Rapid7 InsightOps API and store them in a format optimized for analytical queries (Parquet).

### Proposed Solution

Build a configurable Python service that:
1. Authenticates with the Rapid7 InsightOps API
2. Fetches log data from configurable endpoints
3. Parses log structure dynamically from CSV headers (provided at runtime or as first row)
4. Writes logs to Apache Parquet files for efficient querying
5. Provides configuration via environment variables
6. Includes comprehensive logging and monitoring

### Business Justification

**Value Proposition**:
- **Cost Efficiency**: Parquet format reduces storage costs by 70-90% compared to raw logs
- **Query Performance**: Columnar storage enables 10-100x faster analytical queries
- **Flexibility**: Dynamic schema detection supports evolving log formats
- **Integration**: Parquet files work with standard data tools (Spark, Pandas, DuckDB, etc.)

**Use Cases**:
- Security incident investigation
- Performance analysis and trending
- Compliance reporting
- Anomaly detection

### Alternatives Considered

1. **Direct API Queries**: Rejected - Too slow for large-scale analysis, rate limiting issues
2. **JSON Storage**: Rejected - Inefficient storage, slow queries, limited tool support
3. **Elasticsearch Integration**: Rejected - Additional infrastructure costs, complex setup
4. **CSV Files**: Rejected - No schema enforcement, inefficient queries, large file sizes

---

## Affected Components

**Systems**: New standalone service

**Modules/Services**:
- `log_ingestion` - New Python package
  - `api_client` - Rapid7 API interface
  - `parser` - CSV/log parsing
  - `parquet_writer` - Parquet file generation
  - `config` - Configuration management
  - `main` - Service orchestration

---

## Approval Status

**Approved by**:
- Technical Lead: Approved (Date: 2026-02-10)
- Security Team: Approved (Date: 2026-02-10)
- Product Owner: Approved (Date: 2026-02-10)

**Approval Token Received**: ATP (Approved to Proceed)  
**Approval Date**: 2026-02-10

---

## Implementation Summary

See detailed implementation plan in separate document.

**Estimated Effort**: 13 hours  
**Files to Create**: 23 files  
**Lines of Code**: ~2,140 lines

---

## Change History

| Date | Status | Notes |
|------|--------|-------|
| 2026-02-10 | DRAFT | CR created |
| 2026-02-10 | APPROVED | All approvals received, ATP granted |

---

**End of Change Request CR-2026-02-10-001**
