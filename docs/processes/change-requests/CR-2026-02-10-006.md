# Change Request: CR-2026-02-10-006

## Title
Use embedded `logs_info` from `list_log_sets()` for log selection (single management call)

## Requestor
User

## Date
2026-02-10

## Category
REFACTOR

## Priority
P1-HIGH

## Description
Amend the `--select-log` utility flow to:
1) Get the list of log sets.
2) Allow the user to select a log set (by index or id).
3) List logs **within the selected log set**.
4) Allow the user to select a log (by index or id).

In this repositoryâ€™s target Rapid7 environment, the `/management/logsets` response includes per-logset log membership inline via `logs_info`. Per-logset membership endpoints such as `/management/logsets/{id}/logids` and `/management/logsets/{id}/logs` and attempts to call them produce `404 Not Found`.

This change requires the selection flow to rely on **one** call (`list_log_sets()`) to obtain both log sets and embedded log membership, and to **stop calling** per-logset membership endpoints.

## Business Justification
- Fixes a broken interactive workflow caused by repeated 404s.
- Reduces API calls, latency, and rate-limit pressure.
- Aligns implementation with observed provider behavior in the target environment.

## Affected Components
- `/src/log_ingestion/main.py` (interactive selection flow)
- `/src/log_ingestion/api_client.py` (deprecate membership endpoint behavior)
- `/tests/test_main_select_log.py` (selection flow behavior)
- `/tests/test_api_client_list_logs_in_log_set_fallback_404.py` (update to new contract)
- `/docs/requirements/rtm.md` (requirements update)
